{"ast":null,"code":"var _jsxFileName = \"/home/pat/Desktop/penny_stocks/web/src/cards/CardHistoryChart.js\";\nimport React, { useEffect, useState, useReducer } from \"react\";\nimport axios from 'axios';\nimport { ComposedChart, Line, Area, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, Scatter, ResponsiveContainer } from 'recharts';\nimport { connect } from \"react-redux\";\n\nconst mapStateToProps = state => {\n  return {\n    stock: state.stock\n  };\n};\n\nconst initialState = {\n  master: [],\n  masterData: [],\n  data: []\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'set':\n      return { ...state,\n        master: action.arr\n      };\n\n    case 'setData':\n      return { ...state,\n        data: action.arr\n      };\n\n    case 'setMasterData':\n      return { ...state,\n        masterData: action.arr\n      };\n\n    default:\n      throw new Error('Unexpected action');\n  }\n};\n\nfunction ConnectedCardHistoryChart(props) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  useEffect(() => {\n    if (state.master.length > 1) {\n      formatData();\n    }\n\n    ;\n  }, [state.master]);\n  useEffect(() => {\n    console.log(state.masterData);\n  }, [state.masterData]);\n  useEffect(() => {\n    const arr = [];\n\n    if ({\n      stock\n    } !== '') {\n      //console.log(props.stock.split(' ')[2])\n      getData();\n    }\n\n    ;\n  }, [{\n    stock\n  }]);\n\n  const getData = () => {\n    axios.get(`http://localhost:5000/${{\n      stock\n    }.split(' ')[2]}`, {\n      headers: {\n        \"Access-Control-Allow-Origin\": \"*\"\n      }\n    }).then(res => {\n      dispatch({\n        type: 'set',\n        arr: res.data\n      }); ///setStockData(res.data);\n      //console.log(stockData) \n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  function formatData() {\n    const arr = [];\n    console.log(state.master);\n\n    for (let i = 0; i < state.master[1].length; i++) {\n      //console.log(state.master[1][i]);\n      const price = state.master[1][i];\n      const ao = state.master[2][i];\n      let date = state.master[3][i].split('T')[0].split('-');\n      date = `${date[1]}/${date[2]}`; ///console.log(date, 'dddadadadadadad')\n\n      const percent = ao !== 0 ? Math.round(ao / price * 10) > 8 || Math.round(ao / price * 10) < -8 ? 8 : Math.round(ao / price * 10) : 0; ///console.log(percent);\n\n      const dic = {\n        'name': state.master[0],\n        'price': price,\n        'ao': ao,\n        'date': date,\n        'percent': Math.abs(percent)\n      };\n      arr.push(dic);\n    }\n\n    ;\n    dispatch({\n      type: 'setData',\n      arr: arr\n    });\n    dispatch({\n      type: 'setMasterData',\n      arr: arr\n    });\n    props.setHistoryData(prev => arr);\n  }\n\n  ;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '100%',\n      height: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'absolute'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn update\",\n    style: {\n      position: 'absolute',\n      zIndex: '1',\n      backgroundColor: 'darkgray'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, \"Zoom Out\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: '15vh'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(ResponsiveContainer, {\n    width: \"100%\",\n    height: \"100%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ComposedChart // eslint-disable-next-line react/jsx-no-bind\n  , {\n    width: 500,\n    height: 1000,\n    data: state.masterData,\n    style: {\n      backgroundColor: '#202020'\n    },\n    margin: {\n      top: 20,\n      right: 20,\n      bottom: 20,\n      left: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(XAxis, {\n    dataKey: \"ticker\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(YAxis, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Tooltip, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Legend, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Bar, {\n    dataKey: \"ao\",\n    barSize: 20,\n    fill: \"#FF0000\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Bar, {\n    dataKey: \"percent\",\n    barSize: 20,\n    fill: \"#C000FF\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Line, {\n    dataKey: \"price\",\n    fill: \"#40FF40\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 15\n    }\n  })))));\n}\n\n;\nconst CardHistoryChart = connect(mapStateToProps)(ConnectedCardHistoryChart);\nexport default CardHistoryChart;","map":{"version":3,"sources":["/home/pat/Desktop/penny_stocks/web/src/cards/CardHistoryChart.js"],"names":["React","useEffect","useState","useReducer","axios","ComposedChart","Line","Area","Bar","XAxis","YAxis","CartesianGrid","Tooltip","Legend","Scatter","ResponsiveContainer","connect","mapStateToProps","state","stock","initialState","master","masterData","data","reducer","action","type","arr","Error","ConnectedCardHistoryChart","props","dispatch","length","formatData","console","log","getData","get","split","headers","then","res","catch","err","i","price","ao","date","percent","Math","round","dic","abs","push","setHistoryData","prev","width","height","position","zIndex","backgroundColor","top","right","bottom","left","CardHistoryChart"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useReducer } from \"react\";\nimport axios from 'axios';\nimport {\n    ComposedChart,\n    Line,\n    Area,\n    Bar,\n    XAxis,\n    YAxis,\n    CartesianGrid,\n    Tooltip,\n    Legend,\n    Scatter,\n    ResponsiveContainer,\n  } from 'recharts';\n  import { connect } from \"react-redux\";\n\nconst mapStateToProps = state => {\n  return { stock: state.stock };\n};\n\n\nconst initialState = {\n    master: [],\n    masterData: [],\n    data: [],\n};\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'set': return {...state, master: action.arr};\n    case 'setData': return {...state, data: action.arr}\n    case 'setMasterData': return {...state, masterData: action.arr};\n    default: throw new Error('Unexpected action');\n  }\n};\n\nfunction ConnectedCardHistoryChart(props){\n    const [state, dispatch] = useReducer(reducer, initialState);\n    useEffect(() => {\n        if(state.master.length > 1){\n            formatData();\n        };\n    }, [state.master]);\n    useEffect(() => {\n        console.log(state.masterData)\n    }, [state.masterData])\n    useEffect(() => {\n        const arr = [];\n        if({ stock } !== ''){\n            //console.log(props.stock.split(' ')[2])\n            getData()\n        };\n    \n      }, [{ stock }]);\n      const getData = () => {  \n        axios.get(`http://localhost:5000/${{ stock }.split(' ')[2]}`, {\n          headers: {\n            \"Access-Control-Allow-Origin\": \"*\",\n          }\n        })  \n        .then((res) => {  \n          dispatch({ type: 'set', arr: res.data});\n          ///setStockData(res.data);\n          //console.log(stockData) \n        })\n        .catch(err => {  \n          console.log(err)  \n        });  \n      };\n      function formatData(){\n        const arr = [];\n        console.log(state.master)\n        for(let i=0;i<state.master[1].length;i++){\n            //console.log(state.master[1][i]);\n            const price = state.master[1][i];\n            const ao = state.master[2][i];\n            let date = state.master[3][i].split('T')[0].split('-');\n            date = `${date[1]}/${date[2]}`\n            ///console.log(date, 'dddadadadadadad')\n            const percent = ao !== 0 ? (Math.round((ao / price) *10)  > 8 || Math.round((ao / price) *10) < -8) ? 8:Math.round((ao / price) *10) : 0;\n            ///console.log(percent);\n            const dic = {'name': state.master[0], 'price': price, 'ao': ao, 'date': date, 'percent': Math.abs(percent)};\n            arr.push(dic);\n        };\n        dispatch({ type: 'setData', arr: arr});\n        dispatch({ type: 'setMasterData', arr: arr});\n        props.setHistoryData(prev => arr);\n      };\n    \n    return (\n        <>\n        <div style={{ width: '100%', height: '100%'}}>\n          <div style={{ position: 'absolute'}}>\n            <button  type=\"button\" className=\"btn update\" style={{ position: 'absolute', zIndex: '1', backgroundColor: 'darkgray'}}>\n                Zoom Out\n            </button>\n            <div style={{ height: '15vh'}}></div>\n    \n    \n          </div>\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\n            <ComposedChart\n              // eslint-disable-next-line react/jsx-no-bind\n              width={500}\n              height={1000}\n              data={state.masterData}\n              style={{\n                backgroundColor: '#202020',\n              }}\n              margin={{\n                top: 20,\n                right: 20,\n                bottom: 20,\n                left: 20,\n              }}\n            >\n              <XAxis dataKey=\"ticker\"  />\n              <YAxis />\n              <Tooltip />\n              <Legend />\n              <Bar dataKey=\"ao\" barSize={20} fill=\"#FF0000\" />\n              <Bar dataKey=\"percent\" barSize={20} fill=\"#C000FF\" />\n              <Line dataKey=\"price\" fill=\"#40FF40\" />\n            </ComposedChart>\n          </ResponsiveContainer>\n        </div>\n    \n        </>\n    )\n};\n\n\nconst CardHistoryChart = connect(mapStateToProps)(ConnectedCardHistoryChart);\n\nexport default CardHistoryChart;"]},"metadata":{},"sourceType":"module"}