{"ast":null,"code":"var _jsxFileName = \"/home/pat/Desktop/penny_stocks/web/src/cards/CardBarChart.js\";\nimport React, { useReducer, useEffect } from \"react\";\nimport { BarChart, Bar, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport { connect } from \"react-redux\";\nimport { addBarData, addMasterBarData, incrementBarIndex, decrementBarIndex } from \"../js/actions/index\";\n\nconst mapStateToProps = state => {\n  return {\n    masterData: state.masterHistoryData,\n    data: state.cardBarData,\n    masterBarData: state.masterCardBarData,\n    index: cardBarIndex\n  };\n};\n\nconst initialState = {\n  master: [],\n  masterData: [],\n  data: [],\n  index: [12, 5]\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'set':\n      return { ...state,\n        master: action.arr\n      };\n\n    case 'setData':\n      return { ...state,\n        data: action.arr\n      };\n\n    case 'setMasterData':\n      return { ...state,\n        masterData: action.arr\n      };\n\n    case 'panright':\n      return { ...state,\n        index: action.arr\n      };\n\n    case 'panleft':\n      return { ...state,\n        index: action.arr\n      };\n\n    default:\n      throw new Error('Unexpected action');\n  }\n};\n\nfunction ConnectedCardBarChart(props) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  /*\n  useEffect(() => {\n    if(props.historyData.length > 1){\n      formatData();\n    }\n  }, [props.historyData]);\n  */\n\n  useEffect(() => {\n    if (props.masterData.length > 1) {\n      formatData();\n    }\n  }, [props.masterData]);\n  useEffect(() => {\n    console.log('index change', state.index);\n  }, [state.index]);\n\n  function formatData() {\n    const sl_range = [props.masterData.length - state.index[0], props.masterData.length - state.index[1]];\n    console.log('sl_range', sl_range);\n    props.addBarData(props.masterData.slice(sl_range[0], sl_range[1]));\n    props.addMasterBarData(props.masterData.slice(sl_range[0], sl_range[1])); //dispatch({ type: 'setData', arr: props.masterData.slice(sl_range[0], sl_range[1])});\n    //dispatch({ type: 'setMasterData', arr: props.masterData.slice(sl_range[0], sl_range[1])});\n    //dispatch({ type: 'set', arr: props.masterData});\n  }\n\n  ;\n\n  function panRight() {\n    console.log('masterbarrrrrr', props.masterBarData);\n    const len = props.masterBarData.length;\n    console.log('len', len);\n\n    if (props.index[0] > 8) {\n      props.decrementBarIndex([props.index[0] - 1, props.index[1] - 1]);\n      dispatch({\n        type: 'panright',\n        arr: [state.index[0] - 1, state.index[1] - 1]\n      });\n      formatData();\n    }\n\n    ;\n  }\n\n  ;\n\n  function panLeft() {\n    const len = props.masterBarData.length;\n    console.log('len', len);\n\n    if (props.index[0] < props.masterData.length) {\n      props.incrementBarIndex([state.index[0] + 1, state.index[1] + 1]);\n      dispatch({\n        type: 'panleft',\n        arr: [state.index[0] + 1, state.index[1] + 1]\n      });\n      formatData();\n    }\n\n    ;\n  }\n\n  ;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: panRight,\n    style: {\n      height: '2vw',\n      width: '2vw',\n      position: 'absolute',\n      zIndex: '1'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, \"right\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: panLeft,\n    style: {\n      marginTop: '2vw',\n      height: '2vw',\n      width: '2vw',\n      position: 'absolute',\n      zIndex: '1'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, \"left\"), /*#__PURE__*/React.createElement(ResponsiveContainer, {\n    width: \"100%\",\n    height: \"100%\",\n    style: {\n      backgroundColor: 'white'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(BarChart, {\n    width: 500,\n    height: 300,\n    data: props.data,\n    style: {\n      backgroundColor: 'white'\n    },\n    margin: {\n      top: 5,\n      right: 30,\n      left: 20,\n      bottom: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CartesianGrid, {\n    strokeDasharray: \"3 3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(XAxis, {\n    dataKey: \"date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(YAxis, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Tooltip, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Legend, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Bar, {\n    dataKey: \"price\",\n    fill: \"black\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Bar, {\n    dataKey: \"percent\",\n    fill: \"green\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Bar, {\n    dataKey: \"ao\",\n    fill: \"blue\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }))));\n}\n\nconst CardBarChart = connect(mapStateToProps, {\n  addBarData,\n  addMasterBarData,\n  incrementBarIndex,\n  decrementBarIndex\n})(ConnectedCardBarChart);\nexport default CardBarChart;","map":{"version":3,"sources":["/home/pat/Desktop/penny_stocks/web/src/cards/CardBarChart.js"],"names":["React","useReducer","useEffect","BarChart","Bar","Cell","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","connect","addBarData","addMasterBarData","incrementBarIndex","decrementBarIndex","mapStateToProps","state","masterData","masterHistoryData","data","cardBarData","masterBarData","masterCardBarData","index","cardBarIndex","initialState","master","reducer","action","type","arr","Error","ConnectedCardBarChart","props","dispatch","length","formatData","console","log","sl_range","slice","panRight","len","panLeft","height","width","position","zIndex","marginTop","backgroundColor","top","right","left","bottom","CardBarChart"],"mappings":"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","sourcesContent":["import React, { useReducer, useEffect} from \"react\";\nimport { BarChart, Bar, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport { connect } from \"react-redux\";\nimport { addBarData, addMasterBarData, incrementBarIndex, decrementBarIndex } from \"../js/actions/index\";\n\n\nconst mapStateToProps = state => {\n  return { \n    masterData: state.masterHistoryData,\n    data: state.cardBarData,\n    masterBarData: state.masterCardBarData,\n    index: cardBarIndex,\n   };\n};\n\nconst initialState = {\n  master: [],\n  masterData: [],\n  data: [],\n  index: [12,5],\n};\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'set': return {...state, master: action.arr};\n    case 'setData': return {...state, data: action.arr}\n    case 'setMasterData': return {...state, masterData: action.arr};\n    case 'panright': return {...state, index: action.arr};\n    case 'panleft': return {...state, index: action.arr};\n    default: throw new Error('Unexpected action');\n  }\n};\n\nfunction ConnectedCardBarChart(props) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  /*\n  useEffect(() => {\n    if(props.historyData.length > 1){\n      formatData();\n    }\n  }, [props.historyData]);\n  */\n  useEffect(() => {\n    if(props.masterData.length > 1){\n      formatData()\n    }\n  }, [props.masterData])\n  useEffect(() => {\n    console.log('index change', state.index)\n  }, [state.index])\n  function formatData(){\n    const sl_range = [props.masterData.length-state.index[0], props.masterData.length-state.index[1]];\n    console.log('sl_range', sl_range)\n    props.addBarData(props.masterData.slice(sl_range[0], sl_range[1]));\n    props.addMasterBarData(props.masterData.slice(sl_range[0], sl_range[1]));\n    //dispatch({ type: 'setData', arr: props.masterData.slice(sl_range[0], sl_range[1])});\n    //dispatch({ type: 'setMasterData', arr: props.masterData.slice(sl_range[0], sl_range[1])});\n    //dispatch({ type: 'set', arr: props.masterData});\n\n\n  };\n  function panRight(){\n    console.log('masterbarrrrrr', props.masterBarData)\n    const len = props.masterBarData.length;\n    console.log('len', len)\n    if(props.index[0] > 8){\n      props.decrementBarIndex([props.index[0]-1, props.index[1] - 1])\n      dispatch({ type: 'panright', arr: [state.index[0]-1, state.index[1] - 1]});\n      formatData();\n    };\n  };\n  function panLeft(){\n    const len = props.masterBarData.length;\n    console.log('len', len)\n    if(props.index[0] < props.masterData.length){\n      props.incrementBarIndex([state.index[0]+1, state.index[1] + 1])\n      dispatch({ type: 'panleft', arr: [state.index[0]+1, state.index[1] + 1]});\n      formatData();\n    };\n  };\n  return (\n    <>\n      <button onClick={panRight} style={{ height: '2vw', width: '2vw', position: 'absolute', zIndex: '1'}}>right</button>\n      <button onClick={panLeft} style={{ marginTop: '2vw' ,height: '2vw', width: '2vw', position: 'absolute', zIndex: '1'}}>left</button>\n      <ResponsiveContainer width=\"100%\" height=\"100%\" style={{ backgroundColor: 'white'}}>\n        <BarChart\n          width={500}\n          height={300}\n          data={props.data}\n          style={{ backgroundColor: 'white'}}\n          margin={{\n            top: 5,\n            right: 30,\n            left: 20,\n            bottom: 5,\n          }}\n        >\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis dataKey=\"date\" />\n          <YAxis />\n          <Tooltip />\n          <Legend />\n          <Bar dataKey=\"price\" fill=\"black\" />\n          <Bar dataKey=\"percent\" fill=\"green\" />\n          <Bar dataKey=\"ao\" fill=\"blue\" />\n        </BarChart>\n      </ResponsiveContainer>\n    </>\n  );\n}\n\nconst CardBarChart = connect(\n  mapStateToProps,\n  { addBarData, addMasterBarData, incrementBarIndex, decrementBarIndex }\n  )(ConnectedCardBarChart);\n\nexport default CardBarChart;"]},"metadata":{},"sourceType":"module"}