{"ast":null,"code":"var _jsxFileName = \"/home/pat/Desktop/penny_stocks/web/src/cards/CardPageVisits.js\";\nimport React, { useEffect, useReducer, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { addPageHistory } from \"../js/actions/index\";\n\nconst mapStateToProps = state => {\n  return {\n    historyData: state.masterHistoryData,\n    pa\n  };\n};\n\nconst initialState = {\n  historyDataArray: [],\n  dataArray: []\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'addHistoryData':\n      return { ...state,\n        historyData: action.arr\n      };\n\n    case 'addNewTick':\n      return { ...state,\n        dataArray: action.arr\n      };\n\n    case 'removeDoubles':\n      return { ...state,\n        dataArray: [...new Set(state.dataArray)]\n      };\n\n    case 'clear':\n      return { ...state,\n        dataArray: action.arr\n      };\n\n    default:\n      throw new Error('Unexpected action');\n  }\n};\n\nfunction ConnectedCardPageVisits(props) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const [data, setData] = useState([]);\n  useEffect(() => {\n    const p = state.historyDataArray;\n    dispatch({\n      type: 'addHistoryData',\n      arr: p.push(props.historyData)\n    });\n    formatData();\n    setData(prev => state.dataArray);\n  }, [props.historyData]);\n  useEffect(() => {\n    console.log('arrrrrrrrrrrrrray', state.dataArray);\n  }, [state]);\n\n  function formatData() {\n    if (state.historyDataArray !== undefined) {\n      const arr = [];\n      state.dataArray = [];\n      const dat = state.historyDataArray; //unusual, i cant pop the empty array that apperates out of nowhere??\n\n      if (dat[0].length === 0) {\n        dat.pop(0);\n      }\n\n      ;\n\n      for (let i = 0; i < dat.length; i++) {\n        getData(dat[i]);\n      }\n    }\n\n    ;\n  }\n\n  function getHighLow(arr, time) {\n    console.log('hello', arr.length);\n\n    if (arr.length > time - 1) {\n      const dats = arr.slice(arr.length - time, arr.length - 1);\n      let high = 0;\n      let low = 100;\n\n      for (let i = 0; i < dats.length; i++) {\n        if (parseFloat(dats[i]) > high) {\n          high = Math.round(parseFloat(dats[i]) * 1000) / 1000;\n        }\n\n        if (dats[i] < low) {\n          low = Math.round(parseFloat(dats[i]) * 1000) / 1000;\n        }\n      }\n\n      return `${high}/${low}`;\n    } else return '0';\n  }\n\n  function getData(arr) {\n    const res = state.dataArray;\n    const price = [];\n    const ao = [];\n    const date = [];\n    const tick = [];\n    const percent = [];\n\n    for (let b = 0; b < arr.length; b++) {\n      price.push(arr[b]['price']);\n      ao.push(arr[b]['ao']);\n      date.push(arr[b]['date']);\n      tick.push(arr[b]['name']);\n      percent.push(arr[b]['percent']);\n    }\n\n    ;\n    const pyear = getHighLow(price, 365);\n    const psixM = getHighLow(price, 180);\n    const pthreeM = getHighLow(price, 90);\n    const pmonth = getHighLow(price, 30);\n    const aoyear = getHighLow(ao, 365);\n    const aosixM = getHighLow(ao, 180);\n    const aothreeM = getHighLow(ao, 90);\n    const aomonth = getHighLow(ao, 30);\n    const c = arr.length - 1;\n    console.log(pmonth, 'yearrrsr');\n    const result = {\n      'name': tick[c],\n      'price': price[c],\n      'ao': ao[c],\n      'percent': percent[c],\n      'date': date[c],\n      'pmonth': pmonth,\n      'pyear': pyear,\n      'psixM': psixM,\n      'pthreeM': pthreeM,\n      'aomonth': aomonth,\n      'aoyear': aoyear,\n      'aosixM': aosixM,\n      'aothreeM': aothreeM\n    }; //res.push(result);\n\n    console.log('resssss', result);\n    const arg = [];\n\n    for (let d = 0; d < res.length; d++) {\n      arg.push(res[d]['name']);\n    }\n\n    ;\n    console.log(result['name']);\n    console.log(arg);\n\n    if (!(result['name'] in arg)) {\n      res.push(result);\n    }\n\n    ;\n    dispatch({\n      type: 'addNewTick',\n      arr: res\n    });\n    setData(prev => state.dataArray);\n  }\n\n  ;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-lg rounded\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rounded-t mb-0 px-4 py-3 border-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-wrap items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relative w-full px-4 max-w-full flex-grow flex-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"font-semibold text-base text-gray-800\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }, \"Page visits\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relative w-full px-4 max-w-full flex-grow flex-1 text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"bg-indigo-500 text-white active:bg-indigo-600 text-xs font-bold uppercase px-3 py-1 rounded outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150\",\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }, \"See all\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"block w-full overflow-x-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"items-center w-full bg-transparent border-collapse\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, \"Ticker\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, \"Percent AO/Price\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, \"AO\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, \"Price\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, \"6 Month AO\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  }, \"6 Month Price\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  }, \"1 Months AO\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, \"1 Month Price\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  }, \"3 Month AO\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }, \"3 Month Price\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }, \"1 Year AO\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 17\n    }\n  }, \"1 Year Price\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }\n  }, state.dataArray.map((item, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: item['name'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    className: \"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4 text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 19\n    }\n  }, item['name']), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 19\n    }\n  }, item['percent']), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 19\n    }\n  }, item['ao']), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 19\n    }\n  }, item['price']), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 19\n    }\n  }, item['aosixM']), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 19\n    }\n  }, item['psixM']), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 19\n    }\n  }, item['aomonth']), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 19\n    }\n  }, item['pmonth']), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 19\n    }\n  }, item['aothreeM']), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 19\n    }\n  }, item['pthreeM']), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 19\n    }\n  }, item['aoyear']), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 19\n    }\n  }, item['pyear']))))))));\n}\n\nconst CardPageVisits = connect(mapStateToProps, {\n  addPageHistory\n})(ConnectedCardPageVisits);\nexport default CardPageVisits;","map":{"version":3,"sources":["/home/pat/Desktop/penny_stocks/web/src/cards/CardPageVisits.js"],"names":["React","useEffect","useReducer","useState","connect","addPageHistory","mapStateToProps","state","historyData","masterHistoryData","pa","initialState","historyDataArray","dataArray","reducer","action","type","arr","Set","Error","ConnectedCardPageVisits","props","dispatch","data","setData","p","push","formatData","prev","console","log","undefined","dat","length","pop","i","getData","getHighLow","time","dats","slice","high","low","parseFloat","Math","round","res","price","ao","date","tick","percent","b","pyear","psixM","pthreeM","pmonth","aoyear","aosixM","aothreeM","aomonth","c","result","arg","d","map","item","index","CardPageVisits"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,UAA1B,EAAsCC,QAAtC,QAAqD,OAArD;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,cAAT,QAA+B,qBAA/B;;AAIA,MAAMC,eAAe,GAAGC,KAAK,IAAI;AAC/B,SAAO;AACLC,IAAAA,WAAW,EAAED,KAAK,CAACE,iBADd;AAELC,IAAAA;AAFK,GAAP;AAID,CALD;;AAOA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,gBAAgB,EAAE,EADC;AAEnBC,EAAAA,SAAS,EAAE;AAFQ,CAArB;;AAIA,MAAMC,OAAO,GAAG,CAACP,KAAD,EAAQQ,MAAR,KAAmB;AACjC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,gBAAL;AAAuB,aAAO,EAAC,GAAGT,KAAJ;AAAWC,QAAAA,WAAW,EAAEO,MAAM,CAACE;AAA/B,OAAP;;AACvB,SAAK,YAAL;AAAmB,aAAO,EAAC,GAAGV,KAAJ;AAAWM,QAAAA,SAAS,EAAEE,MAAM,CAACE;AAA7B,OAAP;;AACnB,SAAK,eAAL;AAAsB,aAAO,EAAC,GAAGV,KAAJ;AAAWM,QAAAA,SAAS,EAAE,CAAC,GAAG,IAAIK,GAAJ,CAAQX,KAAK,CAACM,SAAd,CAAJ;AAAtB,OAAP;;AACtB,SAAK,OAAL;AAAc,aAAO,EAAC,GAAGN,KAAJ;AAAWM,QAAAA,SAAS,EAAEE,MAAM,CAACE;AAA7B,OAAP;;AACd;AAAS,YAAM,IAAIE,KAAJ,CAAU,mBAAV,CAAN;AALX;AAOD,CARD;;AAUA,SAASC,uBAAT,CAAiCC,KAAjC,EAAwC;AACtC,QAAM,CAACd,KAAD,EAAQe,QAAR,IAAoBpB,UAAU,CAACY,OAAD,EAAUH,YAAV,CAApC;AACA,QAAM,CAACY,IAAD,EAAOC,OAAP,IAAkBrB,QAAQ,CAAC,EAAD,CAAhC;AACAF,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMwB,CAAC,GAAGlB,KAAK,CAACK,gBAAhB;AACAU,IAAAA,QAAQ,CAAC;AAAEN,MAAAA,IAAI,EAAE,gBAAR;AAA0BC,MAAAA,GAAG,EAAEQ,CAAC,CAACC,IAAF,CAAOL,KAAK,CAACb,WAAb;AAA/B,KAAD,CAAR;AACAmB,IAAAA,UAAU;AACVH,IAAAA,OAAO,CAACI,IAAI,IAAIrB,KAAK,CAACM,SAAf,CAAP;AACD,GALQ,EAKN,CAACQ,KAAK,CAACb,WAAP,CALM,CAAT;AAMAP,EAAAA,SAAS,CAAC,MAAM;AACd4B,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCvB,KAAK,CAACM,SAAvC;AACD,GAFQ,EAEN,CAACN,KAAD,CAFM,CAAT;;AAGA,WAASoB,UAAT,GAAqB;AACnB,QAAGpB,KAAK,CAACK,gBAAN,KAA2BmB,SAA9B,EAAwC;AACtC,YAAMd,GAAG,GAAG,EAAZ;AACAV,MAAAA,KAAK,CAACM,SAAN,GAAkB,EAAlB;AACA,YAAMmB,GAAG,GAAGzB,KAAK,CAACK,gBAAlB,CAHsC,CAItC;;AACA,UAAGoB,GAAG,CAAC,CAAD,CAAH,CAAOC,MAAP,KAAkB,CAArB,EAAuB;AACrBD,QAAAA,GAAG,CAACE,GAAJ,CAAQ,CAAR;AACD;;AAAA;;AACD,WAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACH,GAAG,CAACC,MAAlB,EAAyBE,CAAC,EAA1B,EAA6B;AAC3BC,QAAAA,OAAO,CAACJ,GAAG,CAACG,CAAD,CAAJ,CAAP;AACD;AACF;;AAAA;AACJ;;AACC,WAASE,UAAT,CAAoBpB,GAApB,EAAwBqB,IAAxB,EAA6B;AAC3BT,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBb,GAAG,CAACgB,MAAzB;;AACA,QAAGhB,GAAG,CAACgB,MAAJ,GAAaK,IAAI,GAAC,CAArB,EAAuB;AACrB,YAAMC,IAAI,GAAGtB,GAAG,CAACuB,KAAJ,CAAUvB,GAAG,CAACgB,MAAJ,GAAWK,IAArB,EAA2BrB,GAAG,CAACgB,MAAJ,GAAW,CAAtC,CAAb;AACA,UAAIQ,IAAI,GAAG,CAAX;AACA,UAAIC,GAAG,GAAG,GAAV;;AACA,WAAI,IAAIP,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACI,IAAI,CAACN,MAAnB,EAA0BE,CAAC,EAA3B,EAA8B;AAC5B,YAAGQ,UAAU,CAACJ,IAAI,CAACJ,CAAD,CAAL,CAAV,GAAsBM,IAAzB,EAA8B;AAC5BA,UAAAA,IAAI,GAAGG,IAAI,CAACC,KAAL,CAAWF,UAAU,CAACJ,IAAI,CAACJ,CAAD,CAAL,CAAV,GAAoB,IAA/B,IAAuC,IAA9C;AACD;;AACD,YAAGI,IAAI,CAACJ,CAAD,CAAJ,GAAUO,GAAb,EAAiB;AACfA,UAAAA,GAAG,GAAIE,IAAI,CAACC,KAAL,CAAYF,UAAU,CAACJ,IAAI,CAACJ,CAAD,CAAL,CAAV,GAAqB,IAAjC,CAAD,GAA0C,IAAhD;AACD;AACF;;AACD,aAAQ,GAAEM,IAAK,IAAGC,GAAI,EAAtB;AACD,KAbD,MAaO,OAAO,GAAP;AACR;;AACD,WAASN,OAAT,CAAiBnB,GAAjB,EAAqB;AACnB,UAAM6B,GAAG,GAAGvC,KAAK,CAACM,SAAlB;AACA,UAAMkC,KAAK,GAAE,EAAb;AACA,UAAMC,EAAE,GAAG,EAAX;AACA,UAAMC,IAAI,GAAG,EAAb;AACA,UAAMC,IAAI,GAAG,EAAb;AACA,UAAMC,OAAO,GAAG,EAAhB;;AACA,SAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACnC,GAAG,CAACgB,MAAlB,EAAyBmB,CAAC,EAA1B,EAA6B;AAC3BL,MAAAA,KAAK,CAACrB,IAAN,CAAWT,GAAG,CAACmC,CAAD,CAAH,CAAO,OAAP,CAAX;AACAJ,MAAAA,EAAE,CAACtB,IAAH,CAAQT,GAAG,CAACmC,CAAD,CAAH,CAAO,IAAP,CAAR;AACAH,MAAAA,IAAI,CAACvB,IAAL,CAAUT,GAAG,CAACmC,CAAD,CAAH,CAAO,MAAP,CAAV;AACAF,MAAAA,IAAI,CAACxB,IAAL,CAAUT,GAAG,CAACmC,CAAD,CAAH,CAAO,MAAP,CAAV;AACAD,MAAAA,OAAO,CAACzB,IAAR,CAAaT,GAAG,CAACmC,CAAD,CAAH,CAAO,SAAP,CAAb;AACD;;AAAA;AACD,UAAMC,KAAK,GAAGhB,UAAU,CAACU,KAAD,EAAQ,GAAR,CAAxB;AACA,UAAMO,KAAK,GAAGjB,UAAU,CAACU,KAAD,EAAQ,GAAR,CAAxB;AACA,UAAMQ,OAAO,GAAGlB,UAAU,CAACU,KAAD,EAAQ,EAAR,CAA1B;AACA,UAAMS,MAAM,GAAGnB,UAAU,CAACU,KAAD,EAAQ,EAAR,CAAzB;AACA,UAAMU,MAAM,GAAGpB,UAAU,CAACW,EAAD,EAAI,GAAJ,CAAzB;AACA,UAAMU,MAAM,GAAGrB,UAAU,CAACW,EAAD,EAAI,GAAJ,CAAzB;AACA,UAAMW,QAAQ,GAAGtB,UAAU,CAACW,EAAD,EAAI,EAAJ,CAA3B;AACA,UAAMY,OAAO,GAAGvB,UAAU,CAACW,EAAD,EAAI,EAAJ,CAA1B;AACA,UAAMa,CAAC,GAAG5C,GAAG,CAACgB,MAAJ,GAAa,CAAvB;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAY0B,MAAZ,EAAmB,UAAnB;AACA,UAAMM,MAAM,GAAG;AAAC,cAAQZ,IAAI,CAACW,CAAD,CAAb;AAAkB,eAASd,KAAK,CAACc,CAAD,CAAhC;AAAqC,YAAMb,EAAE,CAACa,CAAD,CAA7C;AAAkD,iBAAWV,OAAO,CAACU,CAAD,CAApE;AAAyE,cAAQZ,IAAI,CAACY,CAAD,CAArF;AAA0F,gBAAUL,MAApG;AAA4G,eAASH,KAArH;AAA4H,eAASC,KAArI;AAA4I,iBAAWC,OAAvJ;AAAgK,iBAAWK,OAA3K;AAAoL,gBAAUH,MAA9L;AAAsM,gBAAUC,MAAhN;AAAwN,kBAAYC;AAApO,KAAf,CAxBmB,CAyBnB;;AACA9B,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBgC,MAAvB;AACA,UAAMC,GAAG,GAAG,EAAZ;;AACA,SAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAClB,GAAG,CAACb,MAAlB,EAAyB+B,CAAC,EAA1B,EAA6B;AAC3BD,MAAAA,GAAG,CAACrC,IAAJ,CAASoB,GAAG,CAACkB,CAAD,CAAH,CAAO,MAAP,CAAT;AACD;;AAAA;AACDnC,IAAAA,OAAO,CAACC,GAAR,CAAYgC,MAAM,CAAC,MAAD,CAAlB;AACAjC,IAAAA,OAAO,CAACC,GAAR,CAAYiC,GAAZ;;AACA,QAAG,EAAED,MAAM,CAAC,MAAD,CAAN,IAAkBC,GAApB,CAAH,EAA4B;AAC1BjB,MAAAA,GAAG,CAACpB,IAAJ,CAAUoC,MAAV;AACD;;AAAA;AACDxC,IAAAA,QAAQ,CAAC;AAAEN,MAAAA,IAAI,EAAE,YAAR;AAAsBC,MAAAA,GAAG,EAAE6B;AAA3B,KAAD,CAAR;AACAtB,IAAAA,OAAO,CAACI,IAAI,IAAIrB,KAAK,CAACM,SAAf,CAAP;AACD;;AAAA;AACD,sBACE,uDACE;AAAK,IAAA,SAAS,EAAC,mFAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,uCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,CADF,eAME;AAAK,IAAA,SAAS,EAAC,6DAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,SAAS,EAAC,+KADZ;AAEE,IAAA,IAAI,EAAC,QAFP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,CANF,CADF,CADF,eAkBE;AAAK,IAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE;AAAO,IAAA,SAAS,EAAC,oDAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,yKAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAIE;AAAI,IAAA,SAAS,EAAC,yKAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAJF,eAOE;AAAI,IAAA,SAAS,EAAC,yKAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAPF,eAUE;AAAI,IAAA,SAAS,EAAC,yKAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAVF,eAaE;AAAI,IAAA,SAAS,EAAC,yKAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAbF,eAgBE;AAAI,IAAA,SAAS,EAAC,yKAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAhBF,eAmBE;AAAI,IAAA,SAAS,EAAC,yKAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAnBF,eAsBE;AAAI,IAAA,SAAS,EAAC,yKAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAtBF,eAyBE;AAAI,IAAA,SAAS,EAAC,yKAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAzBF,eA4BE;AAAI,IAAA,SAAS,EAAC,yKAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBA5BF,eA+BE;AAAI,IAAA,SAAS,EAAC,yKAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBA/BF,eAkCE;AAAI,IAAA,SAAS,EAAC,yKAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAlCF,CADF,CADF,eAyCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGN,KAAK,CAACM,SAAN,CAAgBoD,GAAhB,CAAoB,CAACC,IAAD,EAAOC,KAAP,kBACnB;AAAI,IAAA,GAAG,EAAED,IAAI,CAAC,MAAD,CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,6FAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,IAAI,CAAC,MAAD,CADP,CADF,eAIE;AAAI,IAAA,SAAS,EAAC,mFAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,IAAI,CAAC,SAAD,CADP,CAJF,eAOE;AAAI,IAAA,SAAS,EAAC,mFAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,IAAI,CAAC,IAAD,CADP,CAPF,eAUE;AAAI,IAAA,SAAS,EAAC,mFAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,IAAI,CAAC,OAAD,CADP,CAVF,eAaE;AAAI,IAAA,SAAS,EAAC,mFAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,IAAI,CAAC,QAAD,CADP,CAbF,eAgBE;AAAI,IAAA,SAAS,EAAC,mFAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,IAAI,CAAC,OAAD,CADP,CAhBF,eAmBE;AAAI,IAAA,SAAS,EAAC,mFAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,IAAI,CAAC,SAAD,CADP,CAnBF,eAsBE;AAAI,IAAA,SAAS,EAAC,mFAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,IAAI,CAAC,QAAD,CADP,CAtBF,eAyBE;AAAI,IAAA,SAAS,EAAC,mFAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,IAAI,CAAC,UAAD,CADP,CAzBF,eA4BE;AAAI,IAAA,SAAS,EAAC,mFAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,IAAI,CAAC,SAAD,CADP,CA5BF,eA+BE;AAAI,IAAA,SAAS,EAAC,mFAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,IAAI,CAAC,QAAD,CADP,CA/BF,eAkCE;AAAI,IAAA,SAAS,EAAC,mFAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,IAAI,CAAC,OAAD,CADP,CAlCF,CADD,CADH,CAzCF,CAFF,CAlBF,CADF,CADF;AA+GD;;AAED,MAAME,cAAc,GAAGhE,OAAO,CAC5BE,eAD4B,EAE5B;AAAED,EAAAA;AAAF,CAF4B,CAAP,CAGnBe,uBAHmB,CAAvB;AAKA,eAAegD,cAAf","sourcesContent":["import React, {useEffect, useReducer, useState} from \"react\";\nimport { connect } from \"react-redux\";\nimport { addPageHistory } from \"../js/actions/index\";\n\n\n\nconst mapStateToProps = state => {\n  return { \n    historyData: state.masterHistoryData,\n    pa\n   };\n};\n\nconst initialState = {\n  historyDataArray: [],\n  dataArray: [],\n};\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'addHistoryData': return {...state, historyData: action.arr};\n    case 'addNewTick': return {...state, dataArray: action.arr};\n    case 'removeDoubles': return {...state, dataArray: [...new Set(state.dataArray)]};\n    case 'clear': return {...state, dataArray: action.arr};\n    default: throw new Error('Unexpected action');\n  }\n};\n\nfunction ConnectedCardPageVisits(props) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const [data, setData] = useState([]);\n  useEffect(() => {\n    const p = state.historyDataArray;\n    dispatch({ type: 'addHistoryData', arr: p.push(props.historyData)});\n    formatData();\n    setData(prev => state.dataArray);\n  }, [props.historyData]);\n  useEffect(() => {\n    console.log('arrrrrrrrrrrrrray', state.dataArray);\n  }, [state])\n  function formatData(){\n    if(state.historyDataArray !== undefined){\n      const arr = [];\n      state.dataArray = [];\n      const dat = state.historyDataArray;\n      //unusual, i cant pop the empty array that apperates out of nowhere??\n      if(dat[0].length === 0){\n        dat.pop(0);\n      };\n      for(let i=0;i<dat.length;i++){\n        getData(dat[i])\n      }\n    };\n}\n  function getHighLow(arr,time){\n    console.log('hello', arr.length)\n    if(arr.length > time-1){\n      const dats = arr.slice(arr.length-time, arr.length-1);\n      let high = 0;\n      let low = 100;\n      for(let i=0;i<dats.length;i++){\n        if(parseFloat(dats[i]) > high){\n          high = Math.round(parseFloat(dats[i])*1000) / 1000\n        }\n        if(dats[i] < low){\n          low = (Math.round((parseFloat(dats[i]) *1000)))/1000\n        }\n      }\n      return `${high}/${low}`\n    } else return '0'\n  }\n  function getData(arr){\n    const res = state.dataArray;\n    const price =[];\n    const ao = [];\n    const date = [];\n    const tick = [];\n    const percent = [];\n    for(let b=0;b<arr.length;b++){\n      price.push(arr[b]['price']);\n      ao.push(arr[b]['ao']);\n      date.push(arr[b]['date']);\n      tick.push(arr[b]['name']);\n      percent.push(arr[b]['percent']);\n    };\n    const pyear = getHighLow(price, 365);\n    const psixM = getHighLow(price, 180);\n    const pthreeM = getHighLow(price, 90)\n    const pmonth = getHighLow(price, 30)\n    const aoyear = getHighLow(ao,365);\n    const aosixM = getHighLow(ao,180);\n    const aothreeM = getHighLow(ao,90);\n    const aomonth = getHighLow(ao,30);\n    const c = arr.length - 1\n    console.log(pmonth,'yearrrsr')\n    const result = {'name': tick[c], 'price': price[c], 'ao': ao[c], 'percent': percent[c], 'date': date[c], 'pmonth': pmonth, 'pyear': pyear, 'psixM': psixM, 'pthreeM': pthreeM, 'aomonth': aomonth, 'aoyear': aoyear, 'aosixM': aosixM, 'aothreeM': aothreeM};\n    //res.push(result);\n    console.log('resssss', result);\n    const arg = [];\n    for(let d=0;d<res.length;d++){\n      arg.push(res[d]['name'])\n    };\n    console.log(result['name']);\n    console.log(arg)\n    if(!(result['name'] in arg)){\n      res.push((result))\n    };\n    dispatch({ type: 'addNewTick', arr: res});\n    setData(prev => state.dataArray)\n  };\n  return (\n    <>\n      <div className=\"relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-lg rounded\">\n        <div className=\"rounded-t mb-0 px-4 py-3 border-0\">\n          <div className=\"flex flex-wrap items-center\">\n            <div className=\"relative w-full px-4 max-w-full flex-grow flex-1\">\n              <h3 className=\"font-semibold text-base text-gray-800\">\n                Page visits\n              </h3>\n            </div>\n            <div className=\"relative w-full px-4 max-w-full flex-grow flex-1 text-right\">\n              <button\n                className=\"bg-indigo-500 text-white active:bg-indigo-600 text-xs font-bold uppercase px-3 py-1 rounded outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150\"\n                type=\"button\"\n              >\n                See all\n              </button>\n            </div>\n          </div>\n        </div>\n        <div className=\"block w-full overflow-x-auto\">\n          {/* Projects table */}\n          <table className=\"items-center w-full bg-transparent border-collapse\">\n            <thead>\n              <tr>\n                <th className=\"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\">\n                  Ticker\n                </th>\n                <th className=\"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\">\n                  Percent AO/Price\n                </th>\n                <th className=\"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\">\n                  AO\n                </th>\n                <th className=\"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\">\n                  Price\n                </th>\n                <th className=\"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\">\n                  6 Month AO\n                </th>\n                <th className=\"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\">\n                  6 Month Price\n                </th>\n                <th className=\"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\">\n                  1 Months AO\n                </th>\n                <th className=\"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\">\n                  1 Month Price\n                </th>\n                <th className=\"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\">\n                  3 Month AO\n                </th>\n                <th className=\"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\">\n                  3 Month Price\n                </th>\n                <th className=\"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\">\n                  1 Year AO\n                </th>\n                <th className=\"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left\">\n                  1 Year Price\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {state.dataArray.map((item, index) => (\n                <tr key={item['name']}>\n                  <th className=\"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4 text-left\">\n                    {item['name']}\n                  </th>\n                  <td className=\"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\">\n                    {item['percent']}\n                  </td>\n                  <td className=\"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\">\n                    {item['ao']}\n                  </td>\n                  <td className=\"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\">\n                    {item['price']}\n                  </td>\n                  <td className=\"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\">\n                    {item['aosixM']}\n                  </td>\n                  <td className=\"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\">\n                    {item['psixM']}\n                  </td>\n                  <td className=\"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\">\n                    {item['aomonth']}\n                  </td>\n                  <td className=\"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\">\n                    {item['pmonth']}\n                  </td>\n                  <td className=\"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\">\n                    {item['aothreeM']}\n                  </td>\n                  <td className=\"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\">\n                    {item['pthreeM']}\n                  </td>\n                  <td className=\"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\">\n                    {item['aoyear']}\n                  </td>\n                  <td className=\"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4\">\n                    {item['pyear']}\n                  </td>\n                </tr>\n              ))}\n\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </>\n  );\n}\n\nconst CardPageVisits = connect(\n  mapStateToProps,\n  { addPageHistory }\n  )(ConnectedCardPageVisits);\n\nexport default CardPageVisits;"]},"metadata":{},"sourceType":"module"}