{"ast":null,"code":"var _jsxFileName = \"/home/pat/Desktop/penny_stocks/web/src/cards/CardHistoryChart.js\";\nimport React, { useEffect, useState, useReducer } from \"react\";\nimport axios from 'axios';\nimport { ComposedChart, Line, Area, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, Scatter, ResponsiveContainer } from 'recharts';\nconst initialState = {\n  master: [],\n  masterData: []\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'set':\n      return { ...state,\n        master: action.arr\n      };\n\n    case 'setMasterData':\n      return { ...state\n      };\n\n    case 'setData':\n      return { ...state,\n        masterData: action.arr\n      };\n\n    case 'increment':\n      return state + 1;\n\n    case 'decrement':\n      return state - 1;\n\n    case 'reset':\n      return 0;\n\n    default:\n      throw new Error('Unexpected action');\n  }\n};\n\nexport default function CardHistoryChart(props) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  useEffect(() => {\n    if (state.master.length > 1) {\n      formatData();\n    }\n\n    ;\n  }, [state.master]);\n  useEffect(() => {\n    console.log(state.masterData);\n  }, [state.masterData]);\n  useEffect(() => {\n    const arr = [];\n\n    if (props.stock !== '') {\n      //console.log(props.stock.split(' ')[2])\n      getData();\n    }\n\n    ;\n  }, [props.stock]);\n\n  const getData = () => {\n    axios.get(`http://localhost:5000/${props.stock.split(' ')[2]}`, {\n      headers: {\n        \"Access-Control-Allow-Origin\": \"*\"\n      }\n    }).then(res => {\n      dispatch({\n        type: 'set',\n        arr: res.data\n      }); ///setStockData(res.data);\n      //console.log(stockData) \n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  function formatData() {\n    const arr = [];\n    console.log(state.master);\n\n    for (let i = 0; i < state.master[1].length; i++) {\n      //console.log(state.master[1][i]);\n      const price = state.master[1][i];\n      const ao = state.master[2][i];\n      const date = state.master[3][i];\n      const percent = ao !== 0 ? Math.round(ao / price * 10) > 8 || Math.round(ao / price * 10) < -8 ? 8 : Math.round(ao / price * 10) : 0;\n      console.log(percent);\n      const dic = {\n        'name': state.master[0],\n        'price': price,\n        'ao': ao,\n        'date': date,\n        'percent': Math.abs(percent)\n      };\n      arr.push(dic);\n    }\n\n    ;\n    dispatch({\n      type: 'setData',\n      arr: arr\n    });\n    props.setHistoryData(prev => arr);\n  }\n\n  ;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '100%',\n      height: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'absolute'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn update\",\n    style: {\n      position: 'absolute',\n      zIndex: '1',\n      backgroundColor: 'darkgray'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, \"Zoom Out\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: '15vh'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(ResponsiveContainer, {\n    width: \"100%\",\n    height: \"100%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ComposedChart // eslint-disable-next-line react/jsx-no-bind\n  , {\n    width: 500,\n    height: 1000,\n    data: state.masterData,\n    style: {\n      backgroundColor: '#202020'\n    },\n    margin: {\n      top: 20,\n      right: 20,\n      bottom: 20,\n      left: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(XAxis, {\n    dataKey: \"ticker\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(YAxis, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Tooltip, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Legend, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Bar, {\n    dataKey: \"ao\",\n    barSize: 20,\n    fill: \"#FF0000\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Bar, {\n    dataKey: \"percent\",\n    barSize: 20,\n    fill: \"#C000FF\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Line, {\n    dataKey: \"price\",\n    fill: \"#40FF40\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 15\n    }\n  })))));\n}","map":{"version":3,"sources":["/home/pat/Desktop/penny_stocks/web/src/cards/CardHistoryChart.js"],"names":["React","useEffect","useState","useReducer","axios","ComposedChart","Line","Area","Bar","XAxis","YAxis","CartesianGrid","Tooltip","Legend","Scatter","ResponsiveContainer","initialState","master","masterData","reducer","state","action","type","arr","Error","CardHistoryChart","props","dispatch","length","formatData","console","log","stock","getData","get","split","headers","then","res","data","catch","err","i","price","ao","date","percent","Math","round","dic","abs","push","setHistoryData","prev","width","height","position","zIndex","backgroundColor","top","right","bottom","left"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useReducer } from \"react\";\nimport axios from 'axios';\nimport {\n    ComposedChart,\n    Line,\n    Area,\n    Bar,\n    XAxis,\n    YAxis,\n    CartesianGrid,\n    Tooltip,\n    Legend,\n    Scatter,\n    ResponsiveContainer,\n  } from 'recharts';\n\n\nconst initialState = {\n    master: [],\n    masterData: [],\n};\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'set': return {...state, master: action.arr};\n    case 'setMasterData': return {...state}\n    case 'setData': return {...state, masterData: action.arr};\n    case 'increment': return state + 1;\n    case 'decrement': return state - 1;\n    case 'reset': return 0;\n    default: throw new Error('Unexpected action');\n  }\n};\n\nexport default function CardHistoryChart(props){\n    const [state, dispatch] = useReducer(reducer, initialState);\n    useEffect(() => {\n        if(state.master.length > 1){\n            formatData();\n        };\n    }, [state.master]);\n    useEffect(() => {\n        console.log(state.masterData)\n    }, [state.masterData])\n    useEffect(() => {\n        const arr = [];\n        if(props.stock !== ''){\n            //console.log(props.stock.split(' ')[2])\n            getData()\n        };\n    \n      }, [props.stock]);\n      const getData = () => {  \n        axios.get(`http://localhost:5000/${props.stock.split(' ')[2]}`, {\n          headers: {\n            \"Access-Control-Allow-Origin\": \"*\",\n          }\n        })  \n        .then((res) => {  \n          dispatch({ type: 'set', arr: res.data});\n          ///setStockData(res.data);\n          //console.log(stockData) \n        })\n        .catch(err => {  \n          console.log(err)  \n        });  \n      };\n      function formatData(){\n        const arr = [];\n        console.log(state.master)\n        for(let i=0;i<state.master[1].length;i++){\n            //console.log(state.master[1][i]);\n            const price = state.master[1][i];\n            const ao = state.master[2][i];\n            const date = state.master[3][i];\n            const percent = ao !== 0 ? (Math.round((ao / price) *10)  > 8 || Math.round((ao / price) *10) < -8) ? 8:Math.round((ao / price) *10) : 0;\n            console.log(percent);\n            const dic = {'name': state.master[0], 'price': price, 'ao': ao, 'date': date, 'percent': Math.abs(percent)};\n            arr.push(dic);\n        };\n        dispatch({ type: 'setData', arr: arr});\n        props.setHistoryData(prev => arr);\n      };\n    \n    return (\n        <>\n        <div style={{ width: '100%', height: '100%'}}>\n          <div style={{ position: 'absolute'}}>\n            <button  type=\"button\" className=\"btn update\" style={{ position: 'absolute', zIndex: '1', backgroundColor: 'darkgray'}}>\n                Zoom Out\n            </button>\n            <div style={{ height: '15vh'}}></div>\n    \n    \n          </div>\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\n            <ComposedChart\n              // eslint-disable-next-line react/jsx-no-bind\n              width={500}\n              height={1000}\n              data={state.masterData}\n              style={{\n                backgroundColor: '#202020',\n              }}\n              margin={{\n                top: 20,\n                right: 20,\n                bottom: 20,\n                left: 20,\n              }}\n            >\n              <XAxis dataKey=\"ticker\"  />\n              <YAxis />\n              <Tooltip />\n              <Legend />\n              <Bar dataKey=\"ao\" barSize={20} fill=\"#FF0000\" />\n              <Bar dataKey=\"percent\" barSize={20} fill=\"#C000FF\" />\n              <Line dataKey=\"price\" fill=\"#40FF40\" />\n            </ComposedChart>\n          </ResponsiveContainer>\n        </div>\n    \n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}